---
import technologies from "../data/technologies.json";

const proficiencyColors = {
  Master: "bg-purple-100 text-purple-800",
  Expert: "bg-green-100 text-green-800",
  Proficient: "bg-blue-100 text-blue-800",
  Familiar: "bg-gray-200 text-gray-800",
};
---

<table
  class="w-full border-collapse border border-gray-300 bg-white text-sm"
  data-sort="table"
>
  <thead>
    <tr class="border-b border-gray-300 bg-gray-300">
      <th class="p-3 text-left font-semibold">Technology</th>
      <th class="p-3 text-left font-semibold">Experience</th>
      <th class="p-3 text-left font-semibold">Last Used</th>
      <th class="p-3 text-left font-semibold">Proficiency</th>
    </tr>
  </thead>

  {
    technologies.map((section) => (
      <>
        <tbody>
          <tr class="bg-gray-200">
            <td
              colspan="4"
              class="p-3 font-serif text-lg font-semibold text-gray-700"
            >
              {section.category}
            </td>
          </tr>
        </tbody>

        <tbody>
          {section.items.map((tech, index) => (
            <tr
              class:list={[
                "border-b border-gray-200",
                index % 2 === 1 && "bg-gray-50",
              ]}
            >
              <td class="p-3 font-semibold">{tech.name}</td>
              <td class="p-3" data-sort={tech.experience}>
                {tech.experience < 1
                  ? `${tech.experience * 12} months`
                  : `${tech.experience} years`}
              </td>
              <td class="p-3">
                {tech.lastUsed === "Current" ? (
                  <span class="inline-flex items-center gap-1">
                    <span class="h-2 w-2 rounded-full bg-green-500" />
                    Current
                  </span>
                ) : (
                  tech.lastUsed
                )}
              </td>
              <td class="p-3">
                <span
                  class:list={[
                    "inline-block rounded-full px-3 py-1 text-sm font-semibold",
                    proficiencyColors[tech.proficiency],
                  ]}
                >
                  {tech.proficiency}
                </span>
              </td>
            </tr>
          ))}
        </tbody>
      </>
    ))
  }
</table>
