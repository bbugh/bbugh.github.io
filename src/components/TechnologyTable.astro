---
import technologies from "../data/technologies.json";

const proficiencyColors = {
  Master: "bg-purple-100 text-purple-800",
  Expert: "bg-green-100 text-green-800",
  Proficient: "bg-blue-100 text-blue-800",
  Familiar: "bg-gray-200 text-gray-800",
};
---

<div>
  {
    technologies.map((section) => (
      <div>
        <h3 class="border-r border-l border-gray-300 bg-gray-200 p-3 font-serif text-lg font-semibold text-gray-700">
          {section.category}
        </h3>

        <div class="divide-y divide-gray-200 border border-gray-300 bg-white text-sm">
          {section.items.map((tech, index) => (
            <div
              class:list={[
                "grid grid-cols-2 items-center border-b border-gray-200 md:grid-cols-4",
                index % 2 === 1 && "bg-gray-50",
              ]}
            >
              {/* Tech */}
              <div class="px-3 pt-3 pb-1 font-semibold md:order-1 md:pb-3">
                {tech.name}
              </div>

              {/* Proficiency */}
              <div class="px-3 pt-3 pb-1 text-center md:order-4 md:pb-3">
                <span
                  class:list={[
                    "inline-block rounded-full px-3 py-1 text-sm font-semibold",
                    proficiencyColors[tech.proficiency],
                  ]}
                >
                  {tech.proficiency}
                </span>
              </div>

              {/* Years */}
              <div
                class="px-3 pt-1 pb-3 md:order-2 md:pt-3 md:text-center"
                data-sort={tech.experience}
              >
                {tech.experience < 1
                  ? `${tech.experience * 12} months`
                  : `${tech.experience} years`}
              </div>

              {/* Last used */}
              <div class="px-3 pt-1 pb-3 text-center md:order-3 md:pt-3">
                {tech.lastUsed === "Current" ? (
                  <span class="inline-flex items-center gap-1">
                    <span class="h-2 w-2 rounded-full bg-green-500" />
                    Current
                  </span>
                ) : (
                  tech.lastUsed
                )}
              </div>
            </div>
          ))}
        </div>
      </div>
    ))
  }
</div>
